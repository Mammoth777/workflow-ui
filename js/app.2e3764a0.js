(function(e){function t(t){for(var r,o,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/workflow-ui/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"02ba":function(e,t,n){},"02e6":function(e,t,n){},"13a1":function(e,t,n){"use strict";var r=n("02ba"),a=n.n(r);a.a},2395:function(e,t,n){},3781:function(e,t,n){"use strict";var r=n("6f87"),a=n.n(r);a.a},"3d67":function(e,t,n){},"3ee6":function(e,t,n){"use strict";var r=n("ae5c"),a=n.n(r);a.a},"68d9":function(e,t){},"6f87":function(e,t,n){},"7c55":function(e,t,n){"use strict";var r=n("2395"),a=n.n(r);a.a},"7ca4":function(e,t,n){"use strict";var r=n("e1ec"),a=n.n(r);a.a},8612:function(e,t,n){},a918:function(e,t,n){"use strict";var r=n("3d67"),a=n.n(r);a.a},ae5c:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"op-container"},[n("div",{staticClass:"type-list"},[e._v(" æ‹–åŠ¨åˆ°ç»˜å›¾åŒºğŸ‘‰ "),n("ul",e._l(["DemoNode","FlowNode","Test"].map((function(e){return{nodeType:e,task:{taskType:"Devops"}}})),(function(t,r){return n("li",{directives:[{name:"draggable-nodetype",rawName:"v-draggable-nodetype",value:t,expression:"item"}],key:r,staticClass:"node-type-item"},[e._v(" "+e._s(t.nodeType)+" ")])})),0)]),n("ChartView",{ref:"chart",attrs:{width:"800px",height:"600px",contextMenuList:[{label:"åˆ é™¤",onClick:function(t){return e.contextMenuClick(t,"åˆ é™¤")}},{label:"ç¼–è¾‘",onClick:function(t){return e.contextMenuClick(t,"ç¼–è¾‘")}}]},on:{"node-created":e.nodeCreated,"node-dblclick":e.nodeSelected,"node-deleted":e.nodeDeletedHandler,"edge-dblclick":e.edgeSelected,"edge-connected":e.edgeConnected}})],1),n("div",{staticClass:"edit-item"},[n("h2",[e._v("ä¿®æ”¹"+e._s(e.currentEditingItem.itemType))]),n("div",[n("div",[e._v("id: "+e._s(e.currentEditingItem.id))]),n("div",[e._v("node type: "+e._s(e.currentEditingItem.nodeType))]),n("div",[n("hr"),n("h3",[e._v("task")]),n("br"),n("p",[e._v(" title: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentEditingItem.task.title,expression:"currentEditingItem.task.title"}],attrs:{type:"text"},domProps:{value:e.currentEditingItem.task.title},on:{input:function(t){t.target.composing||e.$set(e.currentEditingItem.task,"title",t.target.value)}}})]),n("p",[e._v(" condition: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentEditingItem.task.condition,expression:"currentEditingItem.task.condition"}],attrs:{type:"text"},domProps:{value:e.currentEditingItem.task.condition},on:{input:function(t){t.target.composing||e.$set(e.currentEditingItem.task,"condition",t.target.value)}}})]),n("p",[e._v(" status: "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.currentEditingItem.task.status,expression:"currentEditingItem.task.status"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.currentEditingItem.task,"status",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"æœªå¼€å§‹"}},[e._v("æœªå¼€å§‹")]),n("option",{attrs:{value:"æ‰§è¡Œä¸­"}},[e._v("æ‰§è¡Œä¸­")]),n("option",{attrs:{value:"æ‰§è¡Œå¤±è´¥"}},[e._v("æ‰§è¡Œå¤±è´¥")]),n("option",{attrs:{value:"æ‰§è¡ŒæˆåŠŸ"}},[e._v("æ‰§è¡ŒæˆåŠŸ")])])])])]),n("button",{on:{click:function(t){return e.updateItem(e.currentEditingItem.itemType,e.currentEditingItem.id,e.currentEditingItem.task)}}},[e._v("update item")]),n("button",{on:{click:function(t){return e.deleteItem(e.currentEditingItem.itemType,e.currentEditingItem.id)}}},[e._v("åˆ é™¤")]),n("button",{on:{click:function(t){return e.printPrevNodes(e.currentEditingItem.id)}}},[e._v("æ‰“å°å‰ç½®èŠ‚ç‚¹")])]),n("div",{staticStyle:{display:"flex"}},[n("button",{on:{click:e.logData}},[e._v("get data")])])])},i=[],o=(n("99af"),n("96cf"),n("1da1")),s=n("60a3"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chart-view"},[n("div",{ref:"workSpace",staticClass:"work-space",style:e.workFlowStyle,on:{dragenter:e.preventHandler,dragover:e.preventHandler,drop:e.dropHandler}},[n("div",{staticClass:"plugins-layer"},[n("plugin-layer",{attrs:{plugins:e.plugins}})],1),n("div",{ref:"drawLayer",staticClass:"draw-layer"},[n("DrawPart",{ref:"chart",staticClass:"node-list-container"})],1)])])},u=[],d=(n("4de4"),n("7db0"),n("c740"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("13d5"),n("a434"),n("4fad"),n("b64b"),n("d3b7"),n("2532"),n("159b"),n("2909")),l=n("d4ec"),p=n("bee2"),f=n("262e"),v=n("2caf"),h=n("3835"),m=n("9ab4"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"draw-part",on:{click:e.itemBlurHandler}},e._l(e.nodes,(function(t){return n("div",{key:t.id,staticClass:"node-item",style:{left:t.x+"px",top:t.y+"px"},attrs:{id:t.id,"data-nodetype":t.nodeType},on:{dblclick:function(n){return e.nodeDblclickHandler(n,t)}}},[n(t.nodeType,e._b({tag:"component"},"component",t.task,!1))],1)})),0)},b=[],y=(n("45fc"),n("b0c0"),n("5530")),k=n("e193"),w=n("257e"),j=function(){function e(t,n){Object(l["a"])(this,e),this.selected=!1,this.id=n.id||k["jsPlumbUtil"].uuid(),this.task=n.task||{},this.vm=t}return Object(p["a"])(e,[{key:"getJsplumbInstance",value:function(){return this.vm.jsplumbInstance}}]),e}(),O=n("0644"),I=n.n(O),x=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(e,r){var a;Object(l["a"])(this,n),a=t.call(this,e,r),a.x=r.x,a.y=r.y,a.nodeType=r.nodeType,setTimeout((function(){a.setDefaultCfg(),a.setDraggable()}),0);var i=I()(r);return Object.assign(Object(w["a"])(a),i),a}return Object(p["a"])(n,[{key:"updateTask",value:function(e){this.task=I()(e)}},{key:"setSelected",value:function(e,t){this.dom=t,this.vm.$set(this,"selected",e),e?t.classList.add("node-selected"):t.classList.remove("node-selected")}},{key:"setDefaultCfg",value:function(){var e={allowLoopback:!1},t=this.getJsplumbInstance();t.addEndpoint(this.id,{uuid:"out-"+this.id,isSource:!0,anchors:["Right"],endpoint:["Dot",{radius:6,cssClass:"end-point",hoverClass:"end-point-hover"}]},e),t.addEndpoint(this.id,{uuid:"in-"+this.id,isTarget:!0,anchors:["Left"],endpoint:["Rectangle",{width:10,height:10,cssClass:"end-point",hoverClass:"end-point-hover"}]},e)}},{key:"setDraggable",value:function(){var e=this,t=this.getJsplumbInstance();t.draggable(this.id,{stop:function(t){var n=Object(h["a"])(t.pos,2),r=n[0],a=n[1];e.x=r,e.y=a}})}}]),n}(j);function E(e,t){var n=new x(e,t);return e.nodes.push(n),n}var _=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(e,r){var a;Object(l["a"])(this,n),a=t.call(this,e,r),a.sourceId=r.sourceId,a.targetId=r.targetId;var i=r.connection||a.connect(a.sourceId,a.targetId);return i.setData(Object(w["a"])(a)),a.connection=i,a.initOverlays(r),i.bind("dblclick",(function(t,n){n.stopPropagation(),a.setSelected(!0),e.apiEmit("edge-dblclick",Object(w["a"])(a))})),a}return Object(p["a"])(n,[{key:"setOverLay",value:function(e,t){var n=this.connection.getOverlay(e);n?n.setLabel(t[1].label||""):(t[1].id=t[1].id||e,this.connection.addOverlay(t))}},{key:"updateTask",value:function(e){this.task=I()(e),this.setCondition(e.condition)}},{key:"setSelected",value:function(e){this.selected=e,e?(this.connection.addClass("edge-selected"),this.connection.setHover(!0)):this.connection.removeClass("edge-selected")}},{key:"connect",value:function(e,t){return this.getJsplumbInstance().connect({uuids:["out-"+e,"in-"+t]})}},{key:"initOverlays",value:function(e){this.setOverLay("arrow",["Arrow",{id:"arrow",location:.95,width:9,length:12}]),this.setCondition(e.task.condition)}},{key:"setCondition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.task.condition=e,this.setOverLay("condition",["Label",{id:"condition",label:e,location:.8,cssClass:"wfui-condition-label"}])}}]),n}(j);function C(e,t){return new _(e,t)}var D={MaxConnections:-1,Connector:["Bezier",{curviness:55}],PaintStyle:{stroke:"#345",strokeWidth:2,"stroke-dasharray":[2,2]},HoverPaintStyle:{stroke:"#00abfb",strokeWidth:5}};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout((function(){t()}),e)}))}function N(e){var t=e.parentElement;if(t&&"BODY"!==e.tagName)return t.dataset.nodetype?e:N(e.parentElement)}var P={},S=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.nodes=[],e.jsplumbInstance=k["jsPlumb"].getInstance(),e}return Object(p["a"])(n,[{key:"mounted",value:function(){var e=this.jsplumbInstance;e.importDefaults(D);var t=this.$refs.container;e.setContainer(t)}},{key:"initNodes",value:function(e){var t=this;return new Promise((function(n){t.jsplumbInstance.ready(Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.map((function(e){return E(t,e)})),r.next=3,T();case 3:n();case 4:case"end":return r.stop()}}),r)}))))}))}},{key:"initEdges",value:function(e){var t=this;return new Promise((function(n){t.jsplumbInstance.ready((function(){e.forEach((function(e){return C(t,e)})),n()}))}))}},{key:"initJsplumbEvents",value:function(){var e=this.jsplumbInstance,t=this;e.bind("beforeDrop",(function(e){var n=e.dropEndpoint,r=e.connection;if(!n)throw Error("dropåœ¨ä½œä¸ºTargetçš„èŠ‚ç‚¹ä¸Šäº†å—? check it");var a=n.connections.some((function(e){return e.targetId===r.targetId&&e.sourceId===r.sourceId}));return!a&&(C(t,Object(y["a"])(Object(y["a"])({},r),{},{task:{}})),!0)})),e.bind("connection",(function(e,n){console.log("connection event");var r=C(t,{id:e.connection.getId(),task:{},sourceId:e.sourceId,targetId:e.targetId,connection:e.connection});t.apiEmit("edge-connected",r)}))}},{key:"itemBlurHandler",value:function(){this.nodes.forEach((function(e){e.dom&&e.setSelected(!1,e.dom)})),this.jsplumbInstance.getConnections().forEach((function(e){var t=e.getData();t.setSelected(!1)}))}},{key:"nodeDblclickHandler",value:function(e,t){e.stopPropagation(),this.itemBlurHandler();var n=t.dom||N(e.target);n&&(t.setSelected(!0,n),this.apiEmit("node-dblclick",t))}}],[{key:"registNodeType",value:function(e,t){if(P[e])throw new Error("æ­¤ç»„ä»¶(".concat(e,")å·²å­˜åœ¨, è¯·å‹¿é‡å¤æ³¨å†Œ."));t.name=e,P[e]=t,this.component(e,t),console.log(P,"å½“å‰å·²æ³¨å†Œç»„ä»¶")}}]),n}(s["e"]);Object(m["a"])([Object(s["b"])("apiEmit")],S.prototype,"apiEmit",void 0),S=Object(m["a"])([Object(s["a"])({})],S);var L=S,$=L,H=(n("f797"),n("2877")),R=Object(H["a"])($,g,b,!1,null,"4a918eae",null),V=R.exports,F=n("e2a0"),B=n.n(F),J=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return Object(p["a"])(n,[{key:"render",value:function(e){return e("div",this.plugins)}}]),n}(s["e"]);Object(m["a"])([Object(s["c"])()],J.prototype,"plugins",void 0),J=Object(m["a"])([Object(s["a"])({})],J);var M,z,Y=J,X=Y,A=Object(H["a"])(X,M,z,!1,null,null,null),W=A.exports;function U(e,t){var n=[],r=e,a=function e(a){var i=t.filter((function(e){return e.targetId===a})).map((function(e){return e.sourceId}));return i.forEach((function(t){n.includes(t)||t===r||(n.push(t),e(t))})),n};return a(e),n}function Z(e){return Object.entries(e).reduce((function(e,t){var n=Object(h["a"])(t,2),r=n[0],a=n[1];return"vm"!==r&&(e[r]=a),"task"===r&&(e[r]=I()(a)),e}),{})}function q(e){return"string"===typeof e?e:e+"px"}var G=[],K=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.plugins=[],e}return Object(p["a"])(n,[{key:"initChart",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.drawPart,n.jsplumbInstance.reset(),n.nodes=[],r=I()(t.nodes),a=I()(t.edges),e.next=7,n.initNodes(r);case 7:return e.next=9,n.initEdges(a);case 9:return n.initJsplumbEvents(),e.abrupt("return",Promise.resolve());case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setData",value:function(e){return this.initChart(e)}},{key:"createNode",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(this.drawPart,I()(t));case 2:return n=e.sent,e.next=5,T();case 5:this.apiEmit("node-created",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteItem",value:function(e,t){var n={node:this.deleteNode,edge:this.deleteEdge};return n[e](t)}},{key:"updateItem",value:function(e,t,n){var r={node:this.updateNode,edge:this.updateEdge};return r[e](t,n)}},{key:"getData",value:function(){var e=this.getNodes(),t=this.getEdges();return{nodes:e.map(Z),edges:t.map(Z)}}},{key:"getNodeById",value:function(e){var t=this.drawPart.nodes;return t.find((function(t){return t.id===e}))}},{key:"getPreviousNodes",value:function(e){var t=this.getData(),n=t.nodes,r=t.edges,a=n.find((function(t){return t.id===e}));if(!a)throw new Error("å½“å‰èŠ‚ç‚¹(id:".concat(e,")ä¸å­˜åœ¨"));var i=U(e,r);return i.map(this.getNodeById)}},{key:"deleteNode",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.drawPart,n.jsplumbInstance.remove(t),r=n.nodes.findIndex((function(e){return e.id===t})),-1!==r){e.next=5;break}throw new Error("æ²¡æœ‰id: ".concat(t,"ä¸ºçš„èŠ‚ç‚¹"));case 5:return a=n.nodes[r],n.nodes.splice(r,1),e.next=9,T();case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteEdge",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=this.drawPart.jsplumbInstance,r=n.getConnections(),a=r.filter((function(e){return e.getId()===t}))[0],a?n.deleteConnection(a):console.error("æ­¤idæ²¡æœ‰å¯¹åº”çš„edge");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateNode",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.drawPart,a=r.nodes.filter((function(e){return e.id===t}))[0],a?a.updateTask(I()(n)):console.error("æœªè·å–åˆ°idä¸º(".concat(t,")çš„èŠ‚ç‚¹")),e.next=5,T();case 5:this.apiEmit("node-updated",{id:a.id,nodeType:a.nodeType,selected:a.selected,task:a.task});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateEdge",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=this.drawPart.jsplumbInstance.getConnections(),a=r.map((function(e){return e.getData()})).filter((function(e){return e.id===t}))[0],a?a.updateTask(n):console.error("æ­¤idæ²¡æœ‰å¯¹åº”çš„edge");case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getNodes",value:function(){return this.drawPart.nodes.map((function(e){return e}))}},{key:"getEdges",value:function(){var e=this.drawPart.jsplumbInstance.getConnections();return e.map((function(e){return e.getData()}))}},{key:"dropHandler",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("nodeType");if(!B()(t))throw new TypeError("è·å–èŠ‚ç‚¹ç±»å‹å¤±è´¥");var n=this.drawPart.$el.getBoundingClientRect(),r=e.clientX-n.x-20,a=e.clientY-n.y-20,i=Object.keys(P);if(!i.includes(t))throw new Error("".concat(t,"èŠ‚ç‚¹ç±»å‹æœªæ³¨å†Œ;\n\nå½“å‰å·²æ³¨å†ŒèŠ‚ç‚¹ç±»å‹: [").concat(i.join(","),"]"));var o=e.dataTransfer.getData("task");this.createNode({x:r,y:a,nodeType:t,task:JSON.parse(o)})}},{key:"preventHandler",value:function(e){e.preventDefault()}},{key:"apiEmit",value:function(e,t,n){this.$emit(e,Z(t))}},{key:"mounted",value:function(){var e,t=this,n=this,r=this.$refs.workSpace,a=this.drawPart.jsplumbInstance,i=G.map((function(e){return e.call(t,r,n,a)})).filter((function(e){return e}));(e=this.plugins).push.apply(e,Object(d["a"])(i))}},{key:"beforeDestroy",value:function(){this.$emit("hook:beforeDestory")}},{key:"drawPart",get:function(){return this.$refs.chart}},{key:"workFlowStyle",get:function(){return{width:q(this.width),height:q(this.height)}}}],[{key:"registNodeTypeByRender",value:function(e,t){return V.registNodeType(e,t)}},{key:"registNodeType",value:function(e,t,n,r){n&&r||console.warn("widthæˆ–heightæœªä¼ å…¥, è¯·ç¡®ä¿å·²ç»åœ¨ç»„ä»¶å†…éƒ¨å›ºå®šäº†èŠ‚ç‚¹å®½é«˜");var a=V.registNodeType.bind(V);a(e,{name:e,functional:!0,render:function(e,a){var i;n&&r&&(i={width:"".concat(n,"px"),height:"".concat(r,"px")});var o={props:a.props,style:i};return e(t,o)}})}},{key:"registPlugins",value:function(e){G.push.apply(G,Object(d["a"])(e))}}]),n}(s["e"]);Object(m["a"])([Object(s["c"])({default:800})],K.prototype,"width",void 0),Object(m["a"])([Object(s["c"])({default:600})],K.prototype,"height",void 0),Object(m["a"])([Object(s["d"])()],K.prototype,"apiEmit",null),K=Object(m["a"])([Object(s["a"])({components:{DrawPart:V,PluginLayer:W}})],K);var Q=K,ee=Q,te=(n("3781"),n("68d9")),ne=n.n(te),re=Object(H["a"])(ee,c,u,!1,null,"356b60a4",null);"function"===typeof ne.a&&ne()(re);var ae=re.exports,ie={inserted:function(e,t){var n=t.value;if(!n||!n.nodeType)throw new Error('v-draggableNodetypeéœ€è¦ä¼ å…¥ä¸€ä¸ªå¯¹è±¡, å¦‚: { nodeType: "SimpleFlowNode", task: { ...èŠ‚ç‚¹ç±»å‹æ•°æ® } }. task(éå¿…ä¼ )å†…å®¹ä¼šè¢«æ·±æ‹·è´åˆ°èŠ‚ç‚¹taskä¸­');n.task=n.task||{};var r=n.nodeType,a=n.task;e.draggable=!0,e.ondragstart=function(e){e.dataTransfer.setData("nodeType",r),e.dataTransfer.setData("task",JSON.stringify(a))},e.ondragend=function(e){return e.preventDefault()},e.ondragover=function(e){return e.preventDefault()}}},oe=ie,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"draggable-bg",style:{backgroundPosition:e.backgroundPosition}})},ce=[],ue=function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.dragView={isDragging:!1,startX:0,startY:0},e.nodeListStyle={left:"0px",top:"0px"},e.backgroundPosition="",e}return Object(p["a"])(n,[{key:"mousedownHandler",value:function(e){this.dragView={isDragging:!0,startX:e.x,startY:e.y}}},{key:"mousemoveHandler",value:function(e){if(this.dragView.isDragging){var t=e.x-this.dragView.startX,n=e.y-this.dragView.startY;this.dragView.startX=e.x,this.dragView.startY=e.y,this.moveHandler(t,n)}}},{key:"mouseupHandler",value:function(e){this.dragView.isDragging=!1}},{key:"moveHandler",value:function(e,t){var n=this.nodeListStyle,r=n.left,a=n.top,i=this.nodeListStyle.left=parseFloat(r)+e+"px",o=this.nodeListStyle.top=parseFloat(a)+t+"px";this.backgroundPosition="left ".concat(i," top ").concat(o),this.drawLayerDom.style.left=i,this.drawLayerDom.style.top=o}},{key:"mounted",value:function(){var e=this.drawLayerDom=this.chartViewVm.$refs.drawLayer;e.style.position="relative",this.workSpace.addEventListener("mousedown",this.mousedownHandler),this.workSpace.addEventListener("mousemove",this.mousemoveHandler),document.body.addEventListener("mouseup",this.mouseupHandler)}},{key:"beforeDestory",value:function(){console.log("hook beforeDestory"),this.workSpace.removeEventListener("mousedown",this.mousedownHandler),this.workSpace.removeEventListener("mousemove",this.mousemoveHandler),document.body.removeEventListener("mouseup",this.mouseupHandler)}}]),n}(s["e"]);Object(m["a"])([Object(s["c"])()],ue.prototype,"chartViewVm",void 0),Object(m["a"])([Object(s["c"])()],ue.prototype,"workSpace",void 0),ue=Object(m["a"])([s["a"]],ue);var de=ue,le=de,pe=(n("3ee6"),Object(H["a"])(le,se,ce,!1,null,"c3c218f8",null)),fe=pe.exports,ve=function(e,t,n){var r=t.$createElement,a=r(fe,{props:{chartViewVm:t,workSpace:e}});return a},he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"zoom-control"},[n("i",{staticClass:"iconfont iconminus",class:["icon",{disabled:e.minusDisabled}],on:{click:function(t){return e.change(-e.defaultIncrement)}}}),n("span",{staticClass:"zoom-rate"},[e._v(e._s(e.zoomRate)+"%")]),n("i",{staticClass:"iconfont iconadd",class:["icon",{disabled:e.addDisabled}],on:{click:function(t){return e.change(+e.defaultIncrement)}}})])},me=[],ge=(n("02e6"),function(e){Object(f["a"])(n,e);var t=Object(v["a"])(n);function n(){var e;return Object(l["a"])(this,n),e=t.apply(this,arguments),e.defaultIncrement=10,e.zoomRate=100,e.addDisabled=!1,e.minusDisabled=!1,e}return Object(p["a"])(n,[{key:"change",value:function(e){var t=this.zoomRate+e;t<50?(t=50,this.minusDisabled=!0):t>200?(t=200,this.addDisabled=!0):(this.addDisabled=!1,this.minusDisabled=!1),this.zoomRate=t;var n=t/100;this.drawLayerDom.style.transform="scale(".concat(n,")"),this.jsplumbInstance.setZoom(n)}}]),n}(s["e"]));Object(m["a"])([Object(s["c"])()],ge.prototype,"jsplumbInstance",void 0),Object(m["a"])([Object(s["c"])()],ge.prototype,"drawLayerDom",void 0),ge=Object(m["a"])([s["a"]],ge);var be=ge,ye=be,ke=(n("13a1"),Object(H["a"])(ye,he,me,!1,null,"9015bdf8",null)),we=ke.exports,je=function(e,t,n){var r=t.$createElement,a=t.$refs.drawLayer,i=r(we,{props:{drawLayerDom:a,jsplumbInstance:n}});return i};ae.registPlugins([ve,je]);var Oe=oe,Ie=ae,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("button",{staticClass:"log-btn",on:{click:e.log}},[e._v("btn")])])},Ee=[],_e={name:"Demo",props:["compTitle"],methods:{log:function(){console.log("å½“å‰ç»„ä»¶æ ‡é¢˜: "+this.compTitle)}}},Ce=_e,De=(n("a918"),Object(H["a"])(Ce,xe,Ee,!1,null,"542b64e6",null)),Te=De.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"default-flow-node",style:{color:e.mainColor,borderTopColor:e.mainColor}},[n("h4",{staticClass:"status",domProps:{textContent:e._s(e.status)}}),n("div",{staticClass:"title"},[e.title?n("span",{domProps:{textContent:e._s(e.title)}}):n("span",{staticClass:"placeholder"},[e._v("è¯·è®¾ç½®æµç¨‹èŠ‚ç‚¹æ ‡é¢˜")])])])},Pe=[],Se={name:"DefaultFlowNode",props:{title:{type:String,default:""},status:{type:String,default:"æœªå¼€å§‹",validator:function(e){var t=["æœªå¼€å§‹","æ‰§è¡Œä¸­","æ‰§è¡ŒæˆåŠŸ","æ‰§è¡Œå¤±è´¥"].includes(e);return t}}},computed:{mainColor:function(){var e={"æœªå¼€å§‹":"#4c4c4b","æ‰§è¡Œä¸­":"#11b4eb","æ‰§è¡ŒæˆåŠŸ":"#08c692","æ‰§è¡Œå¤±è´¥":"#fe0001"};return e[this.status]}}},Le=Se,$e=(n("7ca4"),Object(H["a"])(Le,Ne,Pe,!1,null,"31412182",null)),He=$e.exports;Ie.registNodeTypeByRender("DemoNode",{name:"DemoNode",functional:!0,props:{title:String},render:function(e,t){var n=t.props.title;return e("div",{style:{width:"200px",height:"80px",border:"1px solid #000",background:"#fff"}},[e("div","ç»„ä»¶ç±»å‹: DemoNode"),e("div","[prop]title: "+n),e("div",[e("span","å¤–éƒ¨ç»„ä»¶å¼•ç”¨: "),e(Te,{props:{compTitle:n}})])])}}),Ie.registNodeType("FlowNode",He);var Re={name:"App",components:{ChartView:Ie},directives:{draggableNodetype:Oe},data:function(){return{currentEditingItem:{itemType:"",task:{}}}},methods:{nodeDeletedHandler:function(e){console.log("èŠ‚ç‚¹è¢«åˆ é™¤äº†",e)},nodeCreated:function(e){console.log(e,"created")},nodeSelected:function(e){console.log(e,"node dblclicked"),this.currentEditingItem=Object.assign({itemType:"node"},e)},edgeSelected:function(e){console.log(e,"edge clicked"),this.currentEditingItem=Object.assign({itemType:"edge"},e)},updateItem:function(e,t,n){this.$refs.chart.updateItem(e,t,n)},deleteItem:function(e,t){this.$refs.chart.deleteItem(e,t)},contextMenuClick:function(e,t){console.log("å³é”®èœå•è§¦å‘: ".concat(t," --\x3e ").concat(e.id),e),"åˆ é™¤"===t&&this.$refs.chart.deleteItem("node",e.id)},printPrevNodes:function(e){var t=this.$refs.chart.getPreviousNodes(e);console.log(t)},edgeConnected:function(e){console.log(e,"edge connected");e.sourceId,e.id,this.$refs.chart},logData:function(){var e=this.$refs.chart.getData();console.log(e,"data")}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.chart.initChart({nodes:[{id:"1",x:10,y:50,nodeType:"FlowNode",task:{title:"ä»£ç ç®¡ç†"}},{id:"2",x:300,y:52,nodeType:"FlowNode",task:{title:"æ„å»ºä»»åŠ¡",status:"æ‰§è¡Œä¸­"}},{id:"3",x:598,y:49,nodeType:"FlowNode",task:{title:"éƒ¨ç½²ç®¡ç†",status:"æ‰§è¡ŒæˆåŠŸ"}},{id:"4",x:626,y:252,nodeType:"FlowNode",task:{title:"éƒ¨ç½²ç®¡ç†2",status:"æ‰§è¡Œå¤±è´¥"}},{id:"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a",x:322,y:282,nodeType:"FlowNode",task:{}}],edges:[{id:"_jsplumb_c_1593419365488",sourceId:"1",targetId:"2",task:{}},{id:"_jsplumb_c_1593419365498",sourceId:"2",targetId:"3",task:{condition:"yes"}},{id:"_jsplumb_c_1593419365502",sourceId:"2",targetId:"4",task:{condition:"no"}},{id:"_jsplumb_c_1593419365506",sourceId:"1",targetId:"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a",task:{}},{id:"_jsplumb_c_1593419365508",sourceId:"c79c6f8f-8fce-4f99-92a9-94ff99c84d2a",targetId:"4",task:{}}]}).then((function(){console.log("chart init done"),e.$refs.chart.createNode({nodeType:"FlowNode",x:10,y:300,task:{}}),setTimeout((function(){}),3e3)}));case 1:case"end":return t.stop()}}),t)})))()}},Ve=Re,Fe=(n("7c55"),Object(H["a"])(Ve,a,i,!1,null,null,null)),Be=Fe.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(Be)}}).$mount("#app")},e1ec:function(e,t,n){},f797:function(e,t,n){"use strict";var r=n("8612"),a=n.n(r);a.a}});
//# sourceMappingURL=app.2e3764a0.js.map